"use strict";define(["angularAMD","angularRoute","bootstrap","uiBootstrap","uiBootstrapTpl","configService","sessionStorageService","notificationService","authService","serviceInterceptor","filterUrlService","scorecardService","notificationModalService","appConfig"],function(e){var o=angular.module("loginApp",["ngRoute","ui.bootstrap","ui.bootstrap.tpls"]);return o.run(["$rootScope","$injector",function(e,o){e.$on("$routeChangeSuccess",function(e,o,r){$(".notify").remove()})}]),o.factory("ndmsServiceInterceptor",serviceInterceptor),o.config(["$routeProvider","$locationProvider","$httpProvider",function(e,o,r){r.interceptors.push("ndmsServiceInterceptor")}]),o.controller("LoginController",["sessionStorageService","$window","$filter","$rootScope","notificationService","authService","configService","scorecardService",function(e,o,r,n,t,i,c,a){var s=this,u=c.getAppUrl();s.loginData={username:"",password:""},s.isIE=!!document.documentMode,s.isFullScreen=o.screen.width==o.innerWidth&&o.screen.height-o.innerHeight<=3;var d=function(e,o){return o.indexOf(e)>-1},l=function(e){o.location.href=u+"Scorecard/"+e},f=function(){o.location.href=u+"Hierarchy/0"},p=function(){o.location.href=u+"401.html"},g=function(){a.getScorecardAndTargetStatus().then(function(o){o&&o.id&&(e.set("scorecardId",o.id),o.isTargetAvailable?l(o.id):f())},function(e){e&&t.notify(e.error_description,{autoClose:!1,type:"danger"})})};s.login=function(o){o&&(e.remove(AppConfig.AuthTokenKey),i.login(s.loginData.username,s.loginData.password).then(function(e){var o=d("Admin",e),r=d("KPIOwner",e),n=d("TeamMember",e);o?r||n?g():f():r?g():n?g():p()},function(e){e&&e.error_description&&t.notify(e.error_description,{autoClose:!1,type:"danger"})}))},s.close=function(){e.remove(AppConfig.AuthTokenKey),e.remove("userData"),e.remove("scorecardId"),o.close()},angular.element(o).on("resize",function(){s.isIE=!!document.documentMode,s.isFullScreen=o.screen.width==o.innerWidth&&o.screen.height-o.innerHeight<=3})}]),e.bootstrap(o)});