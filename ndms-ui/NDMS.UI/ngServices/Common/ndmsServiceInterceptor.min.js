"use strict";var serviceInterceptor=["$window","$q","$injector",function(e,r,t){var n=function(e){switch(e){case"GET":return"Loading";case"POST":return"Saving";case"PUT":return"Updating";case"DELETE":return"Deleting";default:return"Loading"}};return{request:function(e){var a=t.get("filterUrlService");if(a.needAuthorization(e.url)){e.headers=e.headers||{};var i=t.get("authService");i.setAuthHeader(e)}var o=t.get("notificationService");return e.url.indexOf("/token")!=-1?o.notify("<span class='glyphicon glyphicon-refresh'/> ...Please wait...",{type:"info",autoClose:!1}):o.notify("<span class='glyphicon glyphicon-refresh'/> "+n(e.method)+"...Please wait...",{type:"info",autoClose:!1}),e||r.when(e)},requestError:function(e){return r.reject(e)},response:function(e){var n=n||t.get("$http");if(e.data.hasError&&!e.data.isBusinessValidation){var a=t.get("notificationModalService");return a.open({header:"Error",message:e.data.errorMessage}),r.reject(e)}if(e.data.hasError&&e.data.isBusinessValidation&&(e.data.errorMessage=e.data.errorMessage.replace(new RegExp("newline","g"),"<br/>")),n.pendingRequests.length<1){var a=t.get("notificationService");a.close()}return e||r.when(e)},responseError:function(n){var a=t.get("notificationModalService");if(401===n.status){var i=t.get("configService"),o=i.getAppUrl();return e.location.href=o+"401.html",r.reject(n)}return n.status===-1&&a.open({header:"Error",message:"Oops...something is not right! Kindly contact your system administrator."}),r.reject(n)}}}];