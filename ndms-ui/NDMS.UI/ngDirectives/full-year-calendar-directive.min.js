"use strict";define(["angularAMD"],function(e){e.directive("fullYearCalendar",["utilityService",function(e){return{restrict:"E",scope:{year:"=?",options:"=?",lastChange:"=?",events:"=",markEvent:"&"},templateUrl:"ngViews/admin/templates/full-year-calendar.tpl.min.html",controller:["$scope",function(t){var n,a,o,r,i,u,l,s=["January","February","March","April","May","June","July","August","September","October","November","December"],c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];t.months=[],t.selectedYear,a=function(){angular.forEach(s,function(e){var n={name:e,weeks:o(e)};t.months.push(n)})},n=function(e){var n={name:s[e],weeks:o(s[e])};t.months.splice(e,1,n)},u=function(e){e&&t.events&&(e.event=!1,t.events.forEach(function(t){t.date=new Date(t),e.year===t.date.getFullYear()&&e.month===t.date.getMonth()&&e.day===t.date.getDate()&&(e.event=!0)}))},i=function(e){if(!t.options.minDate&&!t.options.maxDate)return!0;var n=new Date([e.year,e.month+1,e.day]);return!(t.options.minDate&&n<t.options.minDate)&&!(t.options.maxDate&&n>t.options.maxDate)},t.loadNextYear=function(){t.selectedYear++,t.months=[],a()},t.loadPreviousYear=function(){t.selectedYear--,t.months=[],a()},o=function(e){for(var n=[],a=null,o=new Date(t.selectedYear,s.indexOf(e)+1,0).getDate(),r=1;r<o+1;r+=1){var l=new Date(t.selectedYear,s.indexOf(e),r).getDay();a=a||[null,null,null,null,null,null,null],a[l]={year:t.selectedYear,month:s.indexOf(e),day:r},i(a[l])?t.events&&u(a[l]):a[l].disabled=!0,6!==l&&r!==o||(n.push(a),a=void 0)}return n},r=function(){t.options.currentDate?t.options._defaultDate=e.convertToDateWithoutTimezone(t.options.currentDate):t.options._defaultDate=e.convertToDateWithoutTimezone(new Date),t.selectedDay=t.options._defaultDate.getDate()},l=function(e){t.selectedYear=e,r(),t.months=[],a()},t.weekDays=function(e){return c.map(function(t){return t.slice(0,e)})},t.isDefaultDate=function(e){if(e)return e.year===t.options._defaultDate.getFullYear()&&e.month===t.options._defaultDate.getMonth()&&e.day===t.options._defaultDate.getDate()},t.$watch("year",function(e){angular.isUndefined(e)||l(e)}),t.$watch("lastChange",function(e){angular.isUndefined(e)||n(e.getMonth())}),t.$watch("options.currentDate",function(e){angular.isUndefined(e)||l(e.getFullYear())})}]}}])});