"use strict";define(["angularAMD"],function(e){e.service("scorecardService",["configService","$http","$log","$q",function(e,r,t,o){var s=e.getApiBaseUrl()+"ScorecardAdmin/",c=this;c.hierarchyDropdownDto={kpiOwnerScorecards:[],teamMemberScorecards:[],rootScorecards:[],scorecardExists:!1},this.addOrRemoveFromExistingList=function(e,r){var t=r.map(function(e){return{id:e.id,name:e.namePrefix?e.namePrefix+" - "+e.name:e.name,scorecardName:e.name,topScorecardId:e.topScorecardId,parentScorecardId:e.parentScorecardId}});e.splice(0,e.length),e.push.apply(e,t)},this.updateExistingDropDownDto=function(e){c.hierarchyDropdownDto.scorecardExists=e.scorecardExists,c.addOrRemoveFromExistingList(c.hierarchyDropdownDto.kpiOwnerScorecards,e.kpiOwnerScorecards),c.addOrRemoveFromExistingList(c.hierarchyDropdownDto.teamMemberScorecards,e.teamMemberScorecards),c.addOrRemoveFromExistingList(c.hierarchyDropdownDto.rootScorecards,e.rootScorecards)},this.getScorecard=function(e){var t=o.defer(),c=s+e;return r.get(c).success(function(e){t.resolve(e.data)}).error(function(e,r){t.reject(e)}),t.promise},this.getScorecardHierarchyData=function(e,t){var c=o.defer(),n=s+"GetScorecardHierarchy/"+e+"/"+t;return r.get(n).success(function(e){c.resolve(e.data)}).error(function(e,r){c.reject(e)}),c.promise},this.getHierarchyDropdownList=function(){var e=o.defer(),t=s+"GetHierarchyDropdownList";return r.get(t).success(function(r){c.updateExistingDropDownDto(r.data),e.resolve(c.hierarchyDropdownDto)}).error(function(r,t){e.reject(r)}),e.promise},this.addScorecard=function(e){var t=o.defer(),c=s+"AddScorecard";return r.post(c,e).success(function(e){t.resolve(e)}).error(function(e,r){t.reject(e)}),t.promise},this.updateScorecard=function(e){var t=o.defer(),c=s+"UpdateScorecard";return r.put(c,e).success(function(e){t.resolve(e)}).error(function(e,r){t.reject(e)}),t.promise},this.changeSortOrder=function(e){var t=o.defer(),c=s+"ChangeSortOrder";return r.put(c,e).success(function(e){t.resolve(e)}).error(function(e,r){t.reject(e)}),t.promise},this.getFacilities=function(e){var t=o.defer(),c=s+"GetFacilities/"+e;return r.get(c,e).success(function(e){t.resolve(e.data)}).error(function(e,r){t.reject(e)}),t.promise},this.getDivisions=function(e){var t=o.defer(),c=s+"GetDivisions/"+e;return r.get(c).success(function(e){t.resolve(e.data)}).error(function(e,r){t.reject(e)}),t.promise},this.loadADUsers=function(t){var s=o.defer(),c=e.getApiBaseUrl()+"User/GetADUsersWithLastNameOrAccountName?name="+t;return r.get(c).success(function(e){s.resolve(e.data)}).error(function(e,r){s.reject(e)}),s.promise},this.loadNDMSUsers=function(t){var s=o.defer(),c=e.getApiBaseUrl()+"User/GetNDMSUsersWithLastName/"+t;return r.get(c).success(function(e){s.resolve(e.data)}).error(function(e,r){s.reject(e)}),s.promise},this.addCounterMeasure=function(t){var s=o.defer(),c=e.getApiBaseUrl()+"CounterMeasure/AddCounterMeasure";return r.post(c,t).success(function(e){s.resolve(e.data)}).error(function(e,r){s.reject(e)}),s.promise},this.updateCounterMeasure=function(t){var s=o.defer(),c=e.getApiBaseUrl()+"CounterMeasure/EditCounterMeasure";return r.put(c,t).success(function(e){s.resolve(e)}).error(function(e,r){s.reject(e)}),s.promise},this.getCounterMeasureById=function(t){var s=o.defer(),c=e.getApiBaseUrl()+"CounterMeasure/GetCounterMeasure/"+t;return r.get(c).success(function(e){s.resolve(e)}).error(function(e,r){s.reject(e)}),s.promise},this.getCounterMeasurePriority=function(){var t=o.defer(),s=e.getApiBaseUrl()+"CounterMeasure/GetAllCounterMeasurePriority";return r.get(s).success(function(e){t.resolve(e.data)}).error(function(e,r){t.reject(e)}),t.promise},this.getScorecardAndTargetStatus=function(){var t=o.defer(),s=e.getApiBaseUrl()+"User/GetScorecardIdAndTargetStatus";return r.get(s).success(function(e){t.resolve(e.data)}).error(function(e,r){if(404===r){var o="There is no scorecard available for current user!";t.reject(o)}else t.reject(e)}),t.promise}}])});