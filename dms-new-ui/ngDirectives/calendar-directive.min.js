"use strict";define(["angularAMD","metricType"],function(a){a.directive("calendar",function(){return{scope:{target:"=",dailyTargets:"=",metricDataType:"=",showRolledUpTargets:"=",mode:"="},templateUrl:"ngTemplates/Common/calendar.min.html",controller:["$scope",function(a){var e=this;e.isShowingTarget=!0,e.mode=a.mode,e.metricDataType=a.metricDataType,a.metricDataTypeName=0===a.metricDataType?"wholeNumber":"decimal",a.$watch("mode",function(){a.editMode="manage"===a.mode}),a.$watch("target",function(){var e=new Date(a.target.month.year,a.target.month.id-1,1),t=e.getFullYear(),r=e.getMonth(),n=new Date(t,r+1,0).getDate();if(a.startDay=new Date(t,r,1).getDay(),a.blankDates=Array(a.startDay),a.endDay=new Date(t,r,n).getDay(),a.blankDatesLast=Array(6-a.endDay),!a.dailyTargets||0===a.dailyTargets.length)for(var i=0;i<n;i++)a.dailyTargets.push({day:i+1})}),a.onValueChange=function(e){var t=angular.element("[data-day="+e.day+"]"),r=0===a.metricDataType?parseInt(t.attr("data-original")):parseFloat(t.attr("data-original"));e.isManual=e.isManual||r!==e.goalValue}}]}})});